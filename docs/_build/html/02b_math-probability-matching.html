
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PROBABILITY MATCHING, PART 2 &#8212; Models of the Mind</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '02b_math-probability-matching';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PROBABILITY MATCHING, PART 3" href="03_agent-probability-matching.html" />
    <link rel="prev" title="LAB REPORT" href="02a_math-probability-matching.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Models of the Mind - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="Models of the Mind - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    models-of-the-mind-notebooks
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_python-jupyter-overview.html">Models of the Mind, 2024</a></li>



<li class="toctree-l1"><a class="reference internal" href="01_game-of-life.html">Conway’s “Game of Life”</a></li>

<li class="toctree-l1"><a class="reference internal" href="02a_math-probability-matching.html"><font color="red">LAB REPORT</font></a></li>


<li class="toctree-l1 current active"><a class="current reference internal" href="#">PROBABILITY MATCHING, PART 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_agent-probability-matching.html">PROBABILITY MATCHING, PART 3</a></li>




<li class="toctree-l1"><a class="reference internal" href="04_probability-review.html">Preliminaries: Understanding Logical Symbols in Probability</a></li>








<li class="toctree-l1"><a class="reference internal" href="05_bayes-theorem.html">Introduction to Bayes’ theorem</a></li>








<li class="toctree-l1"><a class="reference internal" href="05_bayes-theorem-rev.html">Introduction to Bayes’ theorem</a></li>








<li class="toctree-l1"><a class="reference internal" href="06_pseudo-swr-analysis.html">More on mathematical models: Statistical models</a></li>


<li class="toctree-l1"><a class="reference internal" href="07_swr-bayes-004.html">Introduction</a></li>





<li class="toctree-l1"><a class="reference internal" href="08_trace-swr.html">Implementations of the TRACE model</a></li>


<li class="toctree-l1"><a class="reference internal" href="10_netsci-01.html">Network Science Overview</a></li>








<li class="toctree-l1"><a class="reference internal" href="11_nnets-01-linear-functions-and-bias.html">Neural networks, Part 1: Linear logic functions as networks</a></li>


<li class="toctree-l1"><a class="reference internal" href="12_nnets-02-training-linear-networks.html">Neural networks, Part 2 – training networks</a></li>

<li class="toctree-l1"><a class="reference internal" href="13_nnets-03-learning-xor.html">Neural networks, Part 3 – training networks for non-linearly separable mappings</a></li>



<li class="toctree-l1"><a class="reference internal" href="14_nnets-04-srn-statlearn.html">Neural networks, Part 4</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F02b_math-probability-matching.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/02b_math-probability-matching.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>PROBABILITY MATCHING, PART 2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-probability-matching-in-groups-of-foraging-ducks">Example: probability matching in groups of foraging ducks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-implementation">An implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report">LAB REPORT</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#required-questions">Required questions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#challenge-questions-grad-students-try-to-do-one-of-these">Challenge questions (grad students, try to do <em>one</em> of these)</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="probability-matching-part-2">
<h1>PROBABILITY MATCHING, PART 2<a class="headerlink" href="#probability-matching-part-2" title="Link to this heading">#</a></h1>
<section id="example-probability-matching-in-groups-of-foraging-ducks">
<h2>Example: probability matching in groups of foraging ducks<a class="headerlink" href="#example-probability-matching-in-groups-of-foraging-ducks" title="Link to this heading">#</a></h2>
<p>In the Gallistel reading, we see how probability matching behavior could be ‘explained’ / ‘predicted’ by a set of differential equations. Now we could create code to graph the function(s) described by those equations, but I think many of us would still find the connection between the equations and predicted behavior a bit murky. Let’s instead approximate the equations with a simple loop-based simulation.</p>
<p>Here I have developed a streamlined / simplified version of the ‘computational model’ described by Gallistel. Again, we are going to generate predictions by looping over a number of time steps. This is an <em>iterative</em> approach, where we actually do calculations at each time step. For those of us who are not mathematicians or physicists, the iterative approach will likely be much more intuitive than a system of differential equations (as in the Gallistel readings). (If you are so inclined, you could try to implement a more faithful version of Gallistel’s model.)</p>
<p>We will specify a number of parameters, including the <strong>rates</strong> and <strong>magnitudes</strong> for the two food sources. We will assume that each ducks observes the disbursement of food and updates its estimates of prevalence at each food source. We will be interested in what proportion of ducks approach each source over time. We need to operationalize how to decide if a duck is ‘at’ a particular source. For our current purposes, let’s simply count a duck as being ‘at’ a source if it is closer to that source than the other. However, we will not try to simulate precise positions of each duck; note that this level of detail is not present in Gallistel’s equations. So we will simply assume that a duck is nearer the source it has selected as soon as it makes that selection.</p>
<p>However, we are also not going to simulate the decision of each duck. We are going to approximate this by tracking prevalence of food at each source over time, and using a ‘switchiness’ constant like Gallistel and earlier researchers use in their equations. We could make this a random variable with a particular distribution – if we were simulating the behavior of each duck. Instead, we are just going to make it a constant that scales the distribution based on prevalence. Let’s walk through how we will do this.</p>
<hr class="docutils" />
<ol class="arabic simple">
<li><p><strong>Initialization</strong>: Given two food sources, Source 1 and Source 2, each source has:</p>
<ul class="simple">
<li><p>A rate of food disbursement: <span class="math notranslate nohighlight">\( rate_1 \)</span> and <span class="math notranslate nohighlight">\( rate_2 \)</span>.</p></li>
<li><p>A magnitude of the food morsel: <span class="math notranslate nohighlight">\( magnitude_1 \)</span> and <span class="math notranslate nohighlight">\( magnitude_2 \)</span>.</p></li>
</ul>
</li>
</ol>
<p>To be very specific:</p>
<ul class="simple">
<li><p><em><span class="math notranslate nohighlight">\( rate_1 \)</span></em>: How often Source 1 distributes food (if <span class="math notranslate nohighlight">\( rate_1 \)</span> = 2, this means Source 1 distributes food every second step [steps 2, 4, 6…]; so higher values are actually <em>slower</em> rates [e.g., if set to 4, food would disperse at time steps 4, 8, 12…]).</p></li>
<li><p><em><span class="math notranslate nohighlight">\( rate_2 \)</span></em>: How often Source 2 distributes food</p></li>
<li><p><em><span class="math notranslate nohighlight">\( magnitude_1 \)</span></em>: The magnitude of food morsels from Source 1</p></li>
<li><p><em><span class="math notranslate nohighlight">\( magnitude_2 \)</span></em>: The magnitude of food morsels from Source 2</p></li>
<li><p><em><span class="math notranslate nohighlight">\(timesteps\)</span></em>: How many timesteps our predictions should include</p></li>
<li><p><em><span class="math notranslate nohighlight">\(switchiness\)</span></em>: a constant that governs how willing or reluctant ducks are, on average, to change sources. A high value would make all ducks very responsive to changes in prevalence</p></li>
</ul>
<p>Then we will run a loop for a number of steps equal to <em><span class="math notranslate nohighlight">\(timesteps\)</span></em>. Source 1 will distribute food of size <em><span class="math notranslate nohighlight">\( magnitude_1 \)</span></em> every <em><span class="math notranslate nohighlight">\( rate_1 \)</span></em> timesteps. Source 2 will distribute food of size <em><span class="math notranslate nohighlight">\( magnitude_1 \)</span></em> every <em><span class="math notranslate nohighlight">\( rate_2 \)</span></em> timesteps. When this happens, estimates of prevalence will be updated. The way we do this is to track the total magnitude of food distributed at a source and divide that by the number of timesteps.</p>
<p>At each time step <span class="math notranslate nohighlight">\( t \)</span>, the prevalence of food at each source is updated based on whether food is disbursed and the magnitude of that food. <strong>Initial</strong> prevalences (at time 0, i.e., the point where we begin) are estimated using values we will specify for the ‘history’ of each source, as though the ducks have already had a chance to observe the sources for a while. For each source, we will specify a baseline <em>base_magnitude</em> (assume this much food has appeared at the source…) and <em>base_time</em> (…over this many time steps). This may seem unnecessarily complicated, but we can set these to zero to leave them out. What this <em>does</em> allow is, e.g., to run a simulation of what would happen if the ducks had been exposed to particular prevalences of food for some amount of time and now we are going to change those. So, to calculate the <em>initial prevalences</em>:</p>
<div class="math notranslate nohighlight">
\[
prevalence_1[0] = \frac{baseMagnitude_1}{baseTime_1}
\]</div>
<div class="math notranslate nohighlight">
\[
prevalence_2[0] = \frac{baseMagnitude_2}{baseTime_2}
\]</div>
<p>Ducks are initialized such that half are near each source (this is a simplification; we could consider instead making the ratio match the expected ratio given the initial prevalences):</p>
<div class="math notranslate nohighlight">
\[
duckDistribution_1[0] = 0.5
\]</div>
<div class="math notranslate nohighlight">
\[
duckDistribution_2[0] = 0.5
\]</div>
<ol class="arabic simple" start="2">
<li><p><strong>Prevalence Calculation</strong>:
For each time step <span class="math notranslate nohighlight">\( t \)</span>, if food is disbursed from a source, we update the cummulative magnitude for that source (<em><span class="math notranslate nohighlight">\(summedMagnitude\)</span></em>), and then update prevalence by dividing by time steps. For example, for Source 1 at time <span class="math notranslate nohighlight">\(t\)</span>:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
summedMagnitude_1 = summedMagnitude_1 + magnitude_1
\]</div>
<div class="math notranslate nohighlight">
\[
prevalence_1[t] = \frac{summedMagnitude_1}{timeSteps_1}
\]</div>
<p>Similarly, for Source 2, if the current time step is divisible by <span class="math notranslate nohighlight">\(rate_2\)</span>:</p>
<div class="math notranslate nohighlight">
\[
summedMagnitude_2 = summedMagnitude_2 + magnitude_2
\]</div>
<div class="math notranslate nohighlight">
\[
prevalence_2[t] = \frac{summedMagnitude_2}{timeSteps_2}
\]</div>
<p>If no food is disbursed at a time step, the prevalence remains the same as the previous step. Note that this may be a questionable detail. Maybe we should just update prevalence at every time step?</p>
<ol class="arabic simple" start="3">
<li><p><strong>Duck Distribution Calculation</strong>:</p></li>
</ol>
<p>If all ducks are calculating the same prevalence values, how can we simulate probability matching? Wouldn’t they all just choose the denser source? Gallistel (like his predecessors in this domain) had to account for this. The solution is to propose that animals vary in their “switchiness” – how likely they are to change sources based on prevalence. Animals are assumed to vary in this parameter, such that some are more likely to change sources, while others are more likely to stay at their current food source even if they have calculated that the other source has higher prevalence. We could assume that every duck has its own switchiness parameter. To assign values, we would set the mean, standard deviation, and distribution type (e.g., Gaussian) for switchiness. For now, let’s do something much simpler. Let’s assume a global switchiness value that represents the mean tendency to switch, and we will call this switchiness parameter <span class="math notranslate nohighlight">\( s \)</span>.</p>
<p>Now to approximate having a distribution of values, we are going to introduce a nonlinearity. We are going to calcuate weighted prevalences at each source by exponentiating prevalence at a source multiplied by switchiness:</p>
<div class="math notranslate nohighlight">
\[
weight_1 = \exp(s \times prevalence_1[t])
\]</div>
<div class="math notranslate nohighlight">
\[
weight_2 = \exp(s \times prevalence_2[t])
\]</div>
<p>The proportion of ducks at each source is then:</p>
<div class="math notranslate nohighlight">
\[
duckDistribution_1[t] = \frac{weight_1}{weight_1 + weight_2}
\]</div>
<div class="math notranslate nohighlight">
\[
duckDistribution_2[t] = \frac{weight_2}{weight_1 + weight_2}
\]</div>
<hr class="docutils" />
<div class="alert alert-block alert-info">
<p><strong>An aside:</strong> for <em>cognitive scientists and neuroscientists</em>, do the calculations above remind you of anything? This is actually a common variant of the Luce (1959) choice rule. This is often expressed along the following lines. For some set of possible alternatives (e.g., words in the lexicon), we somehow calculate the evidence in support of each response alternative. We then calculate the strength of each possible response:</p>
<div class="math notranslate nohighlight">
\[
R_i = \exp(k \times evidence_i)
\]</div>
<p>Note that <span class="math notranslate nohighlight">\(k\)</span> is a constant that often has to be determined for a given task. (In general, <span class="math notranslate nohighlight">\(k\)</span> will need to be fairly small when there are few choices and fairly large when there are many choices. For the probability matching context, <span class="math notranslate nohighlight">\(switchiness\)</span> takes the place of <span class="math notranslate nohighlight">\(k\)</span>. Note that <span class="math notranslate nohighlight">\(k\)</span> is normally an integer, but we are going to use a probability [ranging from 0 to 1] for switchiness below.) We then calculate the response <em>probability</em> for each response by normalizing by the sum of all response strengths. So for each alternative <span class="math notranslate nohighlight">\(i\)</span> from <span class="math notranslate nohighlight">\(n\)</span> possible alternatives:</p>
<div class="math notranslate nohighlight">
\[
P_i = \frac{R_i}{\sum_{j=1}^{n} R_j}
\]</div>
<p>Luce and a veritable mountain of subsequent research have confirmed that this simple rule does an excellent job of approximating the behavior of humans and other animals in an incredible range of choice situations. We can discuss in class.</p>
<p>However, we can also help link this to related concepts in machine learning by putting all the parts into one equation. To make it more readable, let’s replace <span class="math notranslate nohighlight">\({evidence}\)</span> with <span class="math notranslate nohighlight">\(z\)</span>, drop the <span class="math notranslate nohighlight">\(\times\)</span> operators, and use the more common exponentiation notation where <span class="math notranslate nohighlight">\(exp\)</span> is replaced by <span class="math notranslate nohighlight">\(e\)</span>, and the material within parens is instead indicated by raising <span class="math notranslate nohighlight">\(e\)</span> to some power (so <span class="math notranslate nohighlight">\(e^{k {z}_j}\)</span> is equivalent to <span class="math notranslate nohighlight">\(exp(k \times {z}_j\)</span>)):</p>
<div class="math notranslate nohighlight">
\[
P_i = \frac{e^{k {z}_i}}{\sum_{j=1}^{n} e^{k {z}_j}}
\]</div>
<p>This is just what we have done above for our two sources, where <em>prevalences</em> are the evidence and <em>weights</em> are the response strengths.</p>
<p>Now, what is the link to machine learning? For <em>neural network modelers</em>, does this remind you of anything else? Note how similar it is to the <em>softmax</em> transformation:</p>
<div class="math notranslate nohighlight">
\[
\sigma({z}_i) = \frac{e^{z_i}}{\sum_{j=1}^{n} e^{z_j}}
\]</div>
<p>Where <span class="math notranslate nohighlight">\({z}_i\)</span> is the activation value for node <span class="math notranslate nohighlight">\(i\)</span>. The only difference is that there is not typically a scaling constant in the exponentiation step (i.e., the <span class="math notranslate nohighlight">\(k\)</span> from the previous equation is absent; when such a factor is included, it’s called a <em>temperature</em> parameter).</p>
</div>
<hr class="docutils" />
<ol class="arabic simple" start="4">
<li><p><strong>Expected and Actual Ratios</strong>:</p></li>
</ol>
<p>The theoretically expected ratio of ducks at Source 1 based on food magnitudes and rates is very simple. We will express it as the ratio of ducks expected at Source 1. Overall prevalence at each source is just <span class="math notranslate nohighlight">\(magnitude/rate\)</span> (that is, amount of food per unit of time). So a source with <span class="math notranslate nohighlight">\(rate\)</span> = 2 and <span class="math notranslate nohighlight">\(magnitude\)</span> = 4 has a prevalence of <span class="math notranslate nohighlight">\(4/2 = 2\)</span> (that is, 2 units of food per unit of time). Then we just need the ratio of prevalence at the two sources to determine what proportion of ducks should be at Source 1 if the ducks, as a group, are probability matching. Mathematically:</p>
<div class="math notranslate nohighlight">
\[
expectedRatio = \frac{magnitude_1/rate_1}{\left(magnitude_1/rate_1\right) + \left(magnitude_2/rate_2\right)}
\]</div>
<p>The actual ratio is taken from the final value of the duck distribution:</p>
<div class="math notranslate nohighlight">
\[
actualRatio = duckDistribution_1[end]
\]</div>
<p>The discrepancy between the desired and actual ratios is:</p>
<div class="math notranslate nohighlight">
\[
discrepancy = |actualRatio - expectedRatio|
\]</div>
<hr class="docutils" />
</section>
<section id="an-implementation">
<h2>An implementation<a class="headerlink" href="#an-implementation" title="Link to this heading">#</a></h2>
<p>Now let’s look at a way to implement these ideas. Below, you will find python code for the simulation. Below that code, you will find sliders you can use to adjust parameters and graphs that show the results. Play around with it a bit, and then look at the lab report section below the graphs.</p>
<p>The code has many comments in it. Comments begin with <code class="docutils literal notranslate"><span class="pre">#</span></code>; anything after <code class="docutils literal notranslate"><span class="pre">#</span></code> on a line is ignored by the python interpreter. Comments can also begin and end with <code class="docutils literal notranslate"><span class="pre">'''</span></code>.</p>
<p>If you are new to programming and/or Python, you may not understand much of the code. That’s okay. We can discuss it in class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First, we import all the things we need</span>

<span class="c1"># enable animation in jupyter </span>
<span class="o">%</span><span class="k">matplotlib</span> widget

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># numeric tools</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span> <span class="c1"># special features for graphing </span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">interactive</span><span class="p">,</span> <span class="n">IntSlider</span><span class="p">,</span> <span class="n">FloatSlider</span><span class="p">,</span> <span class="n">HBox</span><span class="p">,</span> <span class="n">VBox</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">Layout</span> <span class="c1"># tools for interaction</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span> <span class="c1"># we need this to display within the notebook environment</span>

<span class="c1"># Define the simulation procedure, which will also serve as an </span>
<span class="c1"># &#39;objective function&#39; for finding the optimal value for the </span>
<span class="c1"># switchniness variable. The first line specifies the variables </span>
<span class="c1"># that the function expects. If no default value is specified, then </span>
<span class="c1"># either the variable has to be &#39;global&#39; (a poor programming practice) </span>
<span class="c1"># or it has to be specified. The list of variables after def simulation(...</span>
<span class="c1"># have to be supplied to the function. Look below to see where it is</span>
<span class="c1"># &#39;called&#39;.</span>
<span class="k">def</span> <span class="nf">simulation</span><span class="p">(</span><span class="n">switchiness</span><span class="p">,</span> <span class="n">rate_1</span><span class="p">,</span> <span class="n">rate_2</span><span class="p">,</span> <span class="n">magnitude_1</span><span class="p">,</span> <span class="n">magnitude_2</span><span class="p">,</span> <span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">timeSteps_2</span><span class="p">,</span> <span class="n">timeSteps</span><span class="p">):</span>

    <span class="c1"># Initialize the prevalences and duck distributions </span>
    <span class="c1"># by filling them with zeros</span>
    <span class="n">prevalence_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">)</span> <span class="c1"># an array of timeSteps 0s</span>
    <span class="n">prevalence_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">)</span>
    <span class="n">duckDistribution_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">)</span>
    <span class="n">duckDistribution_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">)</span>

    <span class="c1"># Start with the initial prevalences and duck distributions; note that </span>
    <span class="c1"># summed_magnitude_1 and timeSteps_1 are variables we can send to the </span>
    <span class="c1"># function. They serve to set prior probabiities for prevalence. That is, </span>
    <span class="c1"># we use them to set a baseline assumption about how prevalent the ducks </span>
    <span class="c1"># &#39;assume&#39; food is at each source (a scenario where we would typically </span>
    <span class="c1"># assume 50/50 in the absence of other information). But we can also use </span>
    <span class="c1"># these to look at how quickly the ducks would adjust if the prevalences </span>
    <span class="c1"># changed at some point. For example, we could set the prior to be a ratio</span>
    <span class="c1"># of 2:1. If we set the previous time steps to large values, it will take </span>
    <span class="c1"># longer for a new ratio to &#39;settle&#39;, because we will accumulate new info</span>
    <span class="c1"># via these variables (see below).</span>
    <span class="n">prevalence_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">summed_magnitude_1</span> <span class="o">/</span> <span class="n">timeSteps_1</span> <span class="c1"># food per time</span>
    <span class="n">prevalence_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">summed_magnitude_2</span> <span class="o">/</span> <span class="n">timeSteps_2</span>
    <span class="n">duckDistribution_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># we should calculate this rather than set it</span>
    <span class="n">duckDistribution_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>

    <span class="c1"># Compute the prevalences and duck distributions over time</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">timeSteps</span><span class="p">):</span>
        <span class="c1"># Update the prevalences and time steps if a source disburses food</span>
        <span class="c1">#    Note: The &#39;%&#39; (modulus) operator checks whether t is divisible by </span>
        <span class="c1">#    rate_1 (or rate_2) by seeing if there is a remainder if you divide </span>
        <span class="c1">#    (no remainder means divisible by). </span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">%</span> <span class="n">rate_1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">summed_magnitude_1</span> <span class="o">+=</span> <span class="n">magnitude_1</span>
            <span class="c1">#prevalence_1[t] = summed_magnitude_1 / timeSteps_1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If no food, we keep our old prevalence; an alternative would be to </span>
            <span class="c1"># just recalculate prevalence whether food is disbursed or not</span>
            <span class="n">prevalence_1</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">prevalence_1</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="n">prevalence_1</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">summed_magnitude_1</span> <span class="o">/</span> <span class="n">timeSteps_1</span>
            
        <span class="k">if</span> <span class="n">t</span> <span class="o">%</span> <span class="n">rate_2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">summed_magnitude_2</span> <span class="o">+=</span> <span class="n">magnitude_2</span>
            <span class="c1">#prevalence_2[t] = summed_magnitude_2 / timeSteps_2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If no food, we keep our old prevalence; an alternative would be to </span>
            <span class="c1"># just recalculate prevalence whether food is disbursed or not</span>
            <span class="n">prevalence_2</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">prevalence_2</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            
        <span class="n">prevalence_2</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">summed_magnitude_2</span> <span class="o">/</span> <span class="n">timeSteps_2</span>

        <span class="c1"># increment both time steps</span>
        <span class="n">timeSteps_1</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">timeSteps_2</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Compute the unnormalized weights for each source by scaling (nonlinearly) </span>
        <span class="c1"># by switchiness</span>
        <span class="n">weight_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">switchiness</span> <span class="o">*</span> <span class="n">prevalence_1</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
        <span class="n">weight_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">switchiness</span> <span class="o">*</span> <span class="n">prevalence_2</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
        <span class="c1">#   --&gt; Note - to see the impact of the exponential function, uncomment </span>
        <span class="c1">#       the next two lines and comment out the previous 2 lines</span>
        <span class="c1">#weight_1 = (switchiness * prevalence_1[t])</span>
        <span class="c1">#weight_2 = (switchiness * prevalence_2[t])</span>

        <span class="c1"># Normalize the weights (making them like probabilities) to get the duck distributions</span>
        <span class="n">duckDistribution_1</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_1</span> <span class="o">/</span> <span class="p">(</span><span class="n">weight_1</span> <span class="o">+</span> <span class="n">weight_2</span><span class="p">)</span>
        <span class="n">duckDistribution_2</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight_2</span> <span class="o">/</span> <span class="p">(</span><span class="n">weight_1</span> <span class="o">+</span> <span class="n">weight_2</span><span class="p">)</span>

    <span class="c1"># return sends the listed values back to the point where this function was called</span>
    <span class="k">return</span> <span class="n">prevalence_1</span><span class="p">,</span> <span class="n">prevalence_2</span><span class="p">,</span> <span class="n">duckDistribution_1</span><span class="p">,</span> <span class="n">duckDistribution_2</span>

<span class="k">def</span> <span class="nf">create_sliders</span><span class="p">(</span><span class="n">rate_1</span><span class="p">,</span> <span class="n">rate_2</span><span class="p">,</span> <span class="n">magnitude_1</span><span class="p">,</span> <span class="n">magnitude_2</span><span class="p">,</span> <span class="n">switchiness</span><span class="p">,</span> <span class="n">timeSteps</span><span class="p">,</span> <span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">timeSteps_2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create sliders for the parameters.&quot;&quot;&quot;</span>
    
    <span class="c1"># define custom layout; make it wide enough so slider labels are visible</span>
    <span class="n">custom_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;1000px&#39;</span><span class="p">)</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;description_width&#39;</span><span class="p">:</span> <span class="s1">&#39;initial&#39;</span><span class="p">}</span>  <span class="c1"># Set the description width to its content</span>


    <span class="n">sliders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">rate_1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Rate 1:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">rate_2</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Rate 2:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">magnitude_1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Magnitude 1:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">magnitude_2</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Magnitude 2:&#39;</span><span class="p">),</span>
        <span class="n">FloatSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">switchiness</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Switchiness:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">timeSteps</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Time Steps:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Base mag 1:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Base mag 2:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Base time 1:&#39;</span><span class="p">),</span>
        <span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">timeSteps_2</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Base time 2:&#39;</span><span class="p">)</span>
        <span class="c1"># if slider labels get cut off, can use this style=style at the end to make wider. </span>
        <span class="c1"># aesthetically more pleasing to just make the text short enough to fit</span>
        <span class="c1">#FloatSlider(min=1, max=1000, step=1, value=timeSteps_2, description=&#39;Base time 2:&#39;, style=style)</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">sliders</span>

<span class="c1">#  (it had to be defined and executed after you called the plot updating </span>
<span class="c1"># function, so I put the definition for reset_values() and calling reset_button after </span>
<span class="c1"># defining update_plot and before creating the interactive widget).</span>
 
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The *main* function is what will be executed by default given the last line </span>
<span class="sd">        (take a look)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># Define initial [and default] values for the parameters</span>
    <span class="n">rate_1</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">rate_2</span> <span class="o">=</span> <span class="mi">4</span> 
    <span class="n">magnitude_1</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">magnitude_2</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">switchiness</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">timeSteps</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">summed_magnitude_1</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">summed_magnitude_2</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">timeSteps_1</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">timeSteps_2</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="n">slider_defaults</span> <span class="o">=</span> <span class="p">[</span><span class="n">rate_1</span><span class="p">,</span> <span class="n">rate_2</span><span class="p">,</span> <span class="n">magnitude_1</span><span class="p">,</span> <span class="n">magnitude_2</span><span class="p">,</span> <span class="n">switchiness</span><span class="p">,</span> <span class="n">timeSteps</span><span class="p">,</span> 
                       <span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">timeSteps_2</span><span class="p">]</span>
    
    <span class="c1"># Create the sliders</span>
    <span class="n">sliders</span> <span class="o">=</span> <span class="n">create_sliders</span><span class="p">(</span><span class="o">*</span><span class="n">slider_defaults</span><span class="p">)</span>
    <span class="c1">#sliders = create_sliders(rate_1, rate_2, magnitude_1, magnitude_2, switchiness, timeSteps, summed_magnitude_1, summed_magnitude_2, timeSteps_1, timeSteps_2)</span>

    <span class="c1"># Create the &quot;Reset&quot; button and set its on_click event to reset_values function</span>
    <span class="n">reset_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">)</span>
    <span class="n">reset_button</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">reset_values</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">sliders</span><span class="p">,</span> <span class="n">slider_defaults</span><span class="p">))</span>


    
    <span class="c1"># Initialize the graphs</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">autosize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="n">showlegend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># GRAPH 1</span>
    <span class="n">graph1</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">graph1</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Source 1&quot;</span><span class="p">))</span>
    <span class="n">graph1</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Source 2&quot;</span><span class="p">))</span>
<span class="c1">#    graph1.update_layout(title_text=&quot;Prevalence&quot;, xaxis_title=&quot;Time Step&quot;, yaxis_title=&quot;Prevalence&quot;, legend=dict(x=0.8, y=0.9, font=dict(size=14)))</span>
    <span class="n">graph1</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Prevalence&quot;</span><span class="p">,</span> <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Time Step&quot;</span><span class="p">,</span> <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Prevalence&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)))</span>

    <span class="c1"># GRAPH 2</span>
    <span class="n">graph2</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">graph2</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Source 1&quot;</span><span class="p">))</span>
    <span class="n">graph2</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Source 2&quot;</span><span class="p">))</span>
    <span class="n">graph2</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Duck Distribution&quot;</span><span class="p">,</span> <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Time Step&quot;</span><span class="p">,</span> <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Duck Distribution&quot;</span><span class="p">)</span>

    <span class="c1"># LABELS WILL DISPLAY UPDATED VALUES</span>
    <span class="n">expected_ratio_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Expected ratio: &quot;</span><span class="p">)</span>
    <span class="n">actual_ratio_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Actual ratio: &quot;</span><span class="p">)</span>
    <span class="n">discrepancy_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Discrepancy: &quot;</span><span class="p">)</span>
    <span class="n">duck_proportion_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Duck proportion at source 1: &quot;</span><span class="p">)</span>
    <span class="n">advice_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> --- click the Play control for this cell to reset ---&quot;</span><span class="p">)</span>
    <span class="n">magnitude_1_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current Mag1: &quot;</span><span class="p">)</span>
    <span class="n">magnitude_2_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current Mag2: &quot;</span><span class="p">)</span>
    <span class="n">prevalence_1_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current Prev1: &quot;</span><span class="p">)</span>
    <span class="n">prevalence_2_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current Prev2: &quot;</span><span class="p">)</span>
    <span class="n">duckDistribution_1_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current DuckDist1: &quot;</span><span class="p">)</span>
    <span class="n">duckDistribution_2_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Current DuckDist2: &quot;</span><span class="p">)</span>


    <span class="c1"># Function to update the plots</span>
    <span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">rate_1</span><span class="p">,</span> <span class="n">rate_2</span><span class="p">,</span> <span class="n">magnitude_1</span><span class="p">,</span> <span class="n">magnitude_2</span><span class="p">,</span> <span class="n">switchiness</span><span class="p">,</span> <span class="n">timeSteps</span><span class="p">,</span> <span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">timeSteps_2</span><span class="p">):</span>
        <span class="n">prevalence_1</span><span class="p">,</span> <span class="n">prevalence_2</span><span class="p">,</span> <span class="n">duckDistribution_1</span><span class="p">,</span> <span class="n">duckDistribution_2</span> <span class="o">=</span> \
            <span class="n">simulation</span><span class="p">(</span><span class="n">switchiness</span><span class="p">,</span> <span class="n">rate_1</span><span class="p">,</span> <span class="n">rate_2</span><span class="p">,</span> <span class="n">magnitude_1</span><span class="p">,</span> <span class="n">magnitude_2</span><span class="p">,</span> <span class="n">summed_magnitude_1</span><span class="p">,</span> <span class="n">summed_magnitude_2</span><span class="p">,</span> <span class="n">timeSteps_1</span><span class="p">,</span> <span class="n">timeSteps_2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">))</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">timeSteps</span><span class="p">))</span>

        <span class="c1"># calculate the theoretically expected ratio</span>
        <span class="n">expected_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">magnitude_1</span><span class="o">/</span><span class="n">rate_1</span><span class="p">)</span> <span class="o">/</span> <span class="p">((</span><span class="n">magnitude_1</span><span class="o">/</span><span class="n">rate_1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">magnitude_2</span><span class="o">/</span><span class="n">rate_2</span><span class="p">))</span>
        
        <span class="c1"># calcuate the actual ratio...</span>
        <span class="n">actual_ratio</span> <span class="o">=</span> <span class="n">duckDistribution_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="c1"># and the difference between expected and actual</span>
        <span class="n">discrepancy</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">actual_ratio</span> <span class="o">-</span> <span class="n">expected_ratio</span><span class="p">)</span>

        <span class="c1"># graph update instrucions</span>
        <span class="k">with</span> <span class="n">graph1</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
            <span class="n">graph1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_values</span>
            <span class="n">graph1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">prevalence_1</span>
            <span class="n">graph1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_values</span>
            <span class="n">graph1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">prevalence_2</span>
            <span class="n">showlegend</span><span class="o">=</span><span class="kc">True</span>

        <span class="k">with</span> <span class="n">graph2</span><span class="o">.</span><span class="n">batch_update</span><span class="p">():</span>
            <span class="n">graph2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_values</span>
            <span class="n">graph2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">duckDistribution_1</span>
            <span class="n">graph2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_values</span>
            <span class="n">graph2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">duckDistribution_2</span>

        <span class="c1"># print &#39;labels&#39;    </span>
        <span class="n">expected_ratio_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Expected ratio: </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expected_ratio</span><span class="p">)</span>
        <span class="n">actual_ratio_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Actual ratio:  </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">actual_ratio</span><span class="p">)</span>
        <span class="n">discrepancy_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Discrepancy:  </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">discrepancy</span><span class="p">)</span>
        <span class="n">duck_proportion_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Duck proportion at source 1: </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">duckDistribution_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">magnitude_1_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurMag1: </span><span class="si">{</span><span class="n">magnitude_1</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">magnitude_2_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurMag2: </span><span class="si">{</span><span class="n">magnitude_2</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">prevalence_1_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurPrev1: </span><span class="si">{</span><span class="n">prevalence_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">prevalence_2_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurPrev2: </span><span class="si">{</span><span class="n">prevalence_2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">duckDistribution_1_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurDuckDis1: </span><span class="si">{</span><span class="n">duckDistribution_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">duckDistribution_2_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CurDuckDis2: </span><span class="si">{</span><span class="n">duckDistribution_2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">advice_label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> ### click the Play control for this cell to reset ###&quot;</span>
        
    
    <span class="k">def</span> <span class="nf">reset_values</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">sliders</span><span class="p">,</span> <span class="n">defaults</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the interactive widgets to their default values.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">slider</span><span class="p">,</span> <span class="n">default</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sliders</span><span class="p">,</span> <span class="n">defaults</span><span class="p">):</span>
            <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">default</span>
        <span class="c1"># Force the update</span>
        <span class="n">update_plot</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">slider</span> <span class="ow">in</span> <span class="n">sliders</span><span class="p">])</span>
        <span class="c1"># Create the interactive widget</span>
   
 
    <span class="c1"># Create the interactive widget</span>
    <span class="n">widget</span> <span class="o">=</span> <span class="n">interactive</span><span class="p">(</span><span class="n">update_plot</span><span class="p">,</span> 
                         <span class="n">rate_1</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
                         <span class="n">rate_2</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> 
                         <span class="n">magnitude_1</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> 
                         <span class="n">magnitude_2</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> 
                         <span class="n">switchiness</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> 
                         <span class="n">timeSteps</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> 
                         <span class="n">summed_magnitude_1</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> 
                         <span class="n">summed_magnitude_2</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> 
                         <span class="n">timeSteps_1</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> 
                         <span class="n">timeSteps_2</span><span class="o">=</span><span class="n">sliders</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>

    <span class="c1"># Display the sliders, labels and plots</span>
    <span class="c1">#display(VBox([widget, HBox([expected_ratio_label, actual_ratio_label, discrepancy_label, advice_label]), HBox([graph1, graph2])]))</span>
    <span class="n">display</span><span class="p">(</span><span class="n">reset_button</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">VBox</span><span class="p">([</span><span class="n">widget</span><span class="p">,</span> 
              <span class="n">HBox</span><span class="p">([</span><span class="n">expected_ratio_label</span><span class="p">,</span> <span class="n">actual_ratio_label</span><span class="p">,</span> <span class="n">discrepancy_label</span><span class="p">,</span> <span class="n">advice_label</span><span class="p">]),</span> 
              <span class="n">HBox</span><span class="p">([</span><span class="n">magnitude_1_label</span><span class="p">,</span> <span class="n">magnitude_2_label</span><span class="p">,</span> <span class="n">prevalence_1_label</span><span class="p">,</span> <span class="n">prevalence_2_label</span><span class="p">,</span> <span class="n">duckDistribution_1_label</span><span class="p">,</span> <span class="n">duckDistribution_2_label</span><span class="p">]),</span>
              <span class="n">HBox</span><span class="p">([</span><span class="n">graph1</span><span class="p">,</span> <span class="n">graph2</span><span class="p">])]))</span>


<span class="c1"># Run the main function</span>


<span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "35fbe31bb5784f93bfd4883be1d67cdd", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "acb9c0ec44d3460daa156d83954e5536", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="lab-report">
<h2>LAB REPORT<a class="headerlink" href="#lab-report" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Answer</span> <span class="pre">the</span> <span class="pre">questions</span> <span class="pre">below.</span> <span class="pre">It</span> <span class="pre">works</span> <span class="pre">best</span> <span class="pre">to</span> <span class="pre">copy</span> <span class="pre">and</span> <span class="pre">paste</span> <span class="pre">the</span> <span class="pre">questions</span> <span class="pre">into</span> <span class="pre">your</span> <span class="pre">report</span> <span class="pre">and</span> <span class="pre">insert</span> <span class="pre">your</span> <span class="pre">answers</span> <span class="pre">below</span> <span class="pre">each</span> <span class="pre">prompt.</span> <span class="pre">Remember,</span> <span class="pre">submit</span> <span class="pre">a</span> <span class="pre">'static'</span> <span class="pre">file</span> <span class="pre">(.txt,</span> <span class="pre">.rtf,</span> <span class="pre">.doc,</span> <span class="pre">.pdf,</span> <span class="pre">etc.)</span> <span class="pre">and</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">dynamic</span> <span class="pre">document</span> <span class="pre">link</span> <span class="pre">(e.g.,</span> <span class="pre">to</span> <span class="pre">google</span> <span class="pre">docs).</span> <span class="pre">Make</span> <span class="pre">sure</span> <span class="pre">to</span> <span class="pre">include</span> <span class="pre">your</span> <span class="pre">name,</span> <span class="pre">date,</span> <span class="pre">and</span> <span class="pre">topic</span> <span class="pre">at</span> <span class="pre">the</span> <span class="pre">top</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">report</span> <span class="pre">('Math</span> <span class="pre">models</span> <span class="pre">of</span> <span class="pre">probability</span> <span class="pre">matching').</span></code></p>
<section id="required-questions">
<h3>Required questions<a class="headerlink" href="#required-questions" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Explore a few parameter combinations and other controls.</p>
<ol class="arabic simple">
<li><p>With the defaults, how large is the discrepancy?</p></li>
<li><p>Try increasing the main timeSteps parameter; does the discrepancy ever approach zero? <em>(Note that you can use the timeSteps slider to extend or shorten the plots.</em></p></li>
<li><p>Is there any parameter you think could help? Which one? Try it and report whether it helps.</p></li>
<li><p>If the parameter you chose did not help, try some others. Make sure to reset between each try (by clicking the play icon for the cell). <em>Hint: there is definitely a parameter that will work!</em></p></li>
</ol>
</li>
<li><p>Once you have found parameter settings that allow a low discrepancy with all the other original parameters, try some new combinations of rates and magnitudes. To keep things simple, I recommend keeping either the two rates or the two magnitudes the same, and then only varying one of them (e.g., set rate_1 and rate_2 to 2, but set magnitude_1 and magnitude_2 to different values. Try at least 2 additional rate differences and 2 magnitude differences.</p>
<ol class="arabic simple">
<li><p>In general, does the system tend to be able to predict probability matching for differences in rate? In magnitude?</p></li>
<li><p>For the special parameter that maximizes fit (i.e., minimizes discrepancy [makes it as small as possible]), do you need a new value for every rate or magnitude combination? Or is there a value that yields fairly low discrepancy for most combinations?</p></li>
</ol>
</li>
<li><p>What happens when you change the <em>base_magnitude</em> and <em>base_time</em> parameters? <em>Tip – it usually works best to keep the two base_time values the same (e.g., both 100 or both 200) and manipulate base_size values instead.</em></p></li>
<li><p>How much time did it take you to complete this homework?</p></li>
</ol>
</section>
<section id="challenge-questions-grad-students-try-to-do-one-of-these">
<h3>Challenge questions (grad students, try to do <em>one</em> of these)<a class="headerlink" href="#challenge-questions-grad-students-try-to-do-one-of-these" title="Link to this heading">#</a></h3>
<ol class="arabic simple" start="4">
<li><p>Imagine we actually went out to a UConn pond and did these kinds of experiments.</p>
<ol class="arabic simple">
<li><p>What data would we collect?</p></li>
<li><p>How would we compare the data to the model predictions?</p></li>
<li><p>How closely would the data and model have to correspond for us to conclude the model is correct or at least not completely wrong? Remember, we want to generate testable predictions from the model</p></li>
<li><p>Can you think of aspects of the real-world situation that are not captured in the model? <em>Think about extreme values; does the model make absurd predictions – e.g., what if one source is throwing 100 kilograms of bread every time step, and the other is throwing 50 kg per time step…? Beyond such cases that we could argue should be outside the scope of the model, can you think of other ways the model might go wrong?</em></p></li>
<li><p>Could you use any of these possibilities to falsify the model?</p></li>
</ol>
</li>
<li><p>Try to do one of these, but if you get stuck, just answer “got stuck”.</p>
<ol class="arabic simple">
<li><p><em>Modeling challenge:</em> Can you think of any assumptions in the model you think could be different? Download the notebook and try to modify the code to make the change you have in mind. Report whether/how your revised model performs differently from the original.</p></li>
<li><p><em>Pure programming challenge:</em> TO BE ADDED.</p></li>
</ol>
</li>
</ol>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="02a_math-probability-matching.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><font color='red'>LAB REPORT</font></p>
      </div>
    </a>
    <a class="right-next"
       href="03_agent-probability-matching.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">PROBABILITY MATCHING, PART 3</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-probability-matching-in-groups-of-foraging-ducks">Example: probability matching in groups of foraging ducks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-implementation">An implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report">LAB REPORT</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#required-questions">Required questions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#challenge-questions-grad-students-try-to-do-one-of-these">Challenge questions (grad students, try to do <em>one</em> of these)</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By James Magnuson
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>