
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PROBABILITY MATCHING, PART 3 &#8212; Models of the Mind</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '03_agent-probability-matching';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Preliminaries: Understanding Logical Symbols in Probability" href="04_probability-review.html" />
    <link rel="prev" title="PROBABILITY MATCHING, PART 2" href="02b_math-probability-matching.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Models of the Mind - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="Models of the Mind - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    models-of-the-mind-notebooks
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_python-jupyter-overview.html">Models of the Mind, 2024</a></li>



<li class="toctree-l1"><a class="reference internal" href="01_game-of-life.html">Conway’s “Game of Life”</a></li>

<li class="toctree-l1"><a class="reference internal" href="02a_math-probability-matching.html"><font color="red">LAB REPORT</font></a></li>


<li class="toctree-l1"><a class="reference internal" href="02b_math-probability-matching.html">PROBABILITY MATCHING, PART 2</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">PROBABILITY MATCHING, PART 3</a></li>




<li class="toctree-l1"><a class="reference internal" href="04_probability-review.html">Preliminaries: Understanding Logical Symbols in Probability</a></li>








<li class="toctree-l1"><a class="reference internal" href="05_bayes-theorem.html">Introduction to Bayes’ theorem</a></li>








<li class="toctree-l1"><a class="reference internal" href="05_bayes-theorem-rev.html">Introduction to Bayes’ theorem</a></li>








<li class="toctree-l1"><a class="reference internal" href="06_pseudo-swr-analysis.html">More on mathematical models: Statistical models</a></li>


<li class="toctree-l1"><a class="reference internal" href="07_swr-bayes-004.html">Introduction</a></li>





<li class="toctree-l1"><a class="reference internal" href="08_trace-swr.html">Implementations of the TRACE model</a></li>


<li class="toctree-l1"><a class="reference internal" href="10_netsci-01.html">Network Science Overview</a></li>








<li class="toctree-l1"><a class="reference internal" href="11_nnets-01-linear-functions-and-bias.html">Neural networks, Part 1: Linear logic functions as networks</a></li>


<li class="toctree-l1"><a class="reference internal" href="12_nnets-02-training-linear-networks.html">Neural networks, Part 2 – training networks</a></li>

<li class="toctree-l1"><a class="reference internal" href="13_nnets-03-learning-xor.html">Neural networks, Part 3 – training networks for non-linearly separable mappings</a></li>



<li class="toctree-l1"><a class="reference internal" href="14_nnets-04-srn-statlearn.html">Neural networks, Part 4</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F03_agent-probability-matching.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/03_agent-probability-matching.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>PROBABILITY MATCHING, PART 3</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">PROBABILITY MATCHING, PART 3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recapping-the-mathematical-model-approach">Recapping the mathematical model approach</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#towards-an-agent-based-approach">Towards an Agent-Based approach</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crucial-test">Crucial test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-details">Some details</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-1">Lab report, part 1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-2">Lab report, part 2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-3">Lab report, part 3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-4-challenge-questions">Lab report, part 4 – challenge questions</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="probability-matching-part-3">
<h1>PROBABILITY MATCHING, PART 3<a class="headerlink" href="#probability-matching-part-3" title="Link to this heading">#</a></h1>
<section id="recapping-the-mathematical-model-approach">
<h2>Recapping the mathematical model approach<a class="headerlink" href="#recapping-the-mathematical-model-approach" title="Link to this heading">#</a></h2>
<p>Gallistel (1990) makes a compelling case that we <em>can</em> model probability matching in groups of foraging animals by assuming each animal represents the full complexity of the situation. That is, on Gallistel’s <em>representational</em> theory, each duck (in our example domain) respresents rate and magnitude of food available at each source and integrates those over time to assess the prevalence of food (size units per unit of time, e.g., <span class="math notranslate nohighlight">\(grams/minute\)</span>, although we do not assume the ducks have such specific units; in other parts of the book, Gallistel elegantly delves into how anmimals can represent time, rate, and magnitude [among other things] in a variety of domains). Once a duck has calculated (estimated) prevalence at each source, it needs to evaluate which source is preferable. A simple way to do this is simply consider the ratio of each source to the sum of both sources, e.g.:</p>
<div class="math notranslate nohighlight">
\[
preference = \frac{prevalence_{max}}{prevalence_1 + prevalence_2}
\]</div>
<p>Where <span class="math notranslate nohighlight">\(prevalence_{max}\)</span> is the larger <span class="math notranslate nohighlight">\(prevalence\)</span>, and this ratio tells us how much more preferable the larger one is. (In the previous notebook, there was also some exponential weighting that introduces a nonlinearity, but this is not crucial.) Recall that there is a hiccup here, though: if each duck does the same calculation, each duck will go toward the food source with higher prevalence. To prevent this, a <span class="math notranslate nohighlight">\(switchiness\)</span> variable is introduced, with the idea that ducks will vary in how willing they are to change sources if they are at the less prevalent source.</p>
</section>
<section id="towards-an-agent-based-approach">
<h2>Towards an Agent-Based approach<a class="headerlink" href="#towards-an-agent-based-approach" title="Link to this heading">#</a></h2>
<p>Let’s try modeling this system another way. Instead of devising equations that describe the system rather abstractly, let’s see what it would take to simulate the moment-by-moment behavior of ducks.</p>
<p>To do this, we are going to use <strong>agent-based modeling</strong>. This has some similarity to the cellular automata we played around with using the Game of Life simulator. But instead of our primitive elements only being fixed locations on a grid (although we did see the emergence of intercellular interactions that appeared to cohere and act as units), we are going to populate a grid with <em>agents</em> (ducks) that can navigate the grid (the pond). We will also need a method for dropping food in regions of the pond. Then we have to think about how the ducks will update their representations of food prevalence at the two sources, how they should move towards food, whether/how they should move if there is no food in the environment, how quickly they can move, etc.</p>
<p>So let’s think about all the things we have to define in order to create a simulation.</p>
<ul class="simple">
<li><p>Pond size and shape (let’s keep it a rectangle, so we just have to define X and Y dimensions). Let’s start with a 40x40 grid.</p></li>
<li><p>Food source dimensions – let’s put them at the top and bottom of the pond, but how big should they be? Let’s start with a the sources having a size based on 8: they will extend 4 cells to the left and right of the pond center, and 8 cells from the top or bottom end.</p></li>
<li><p>Number of ducks – let’s start with 50.</p></li>
<li><p>Rates and morsel magnitudes</p></li>
<li><p>How ducks will update representations</p></li>
<li><p>How many timesteps the simulation will last</p></li>
</ul>
<p>Please review the code below – at least skim it. Then try the simulator below and see if you can understand how it works. We will try a few things.</p>
<ul class="simple">
<li><p>For moving: ducks will first have to update their source preference, and then make a decision based on their personal <em>switchiness</em> value (which we’ll distribute normally). They will update their preference, and then choose their food source by generating a random number. If that number is larger than their switchiness value, they will do a second decision. If a second random number is larger than the ratio of densities, they choose the denser source.</p>
<ul>
<li><p>Then, they will ‘aim’ at the nearest morsel of available food at their preferred source, and move to the ‘best’ adjacent unoccupied cell that will move them closer to that piece of food.</p></li>
<li><p>If no food is available at their preferred source, they will move to a random adjacent unoccupied cell. If all cells are occupied, they stay where they are.</p></li>
</ul>
</li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>You need to install mesa and tkinter from the command line before starting jupyter lab.</p>
<p><code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">mesa</span> <span class="pre">tkinter</span></code></p>
</section>
<section id="crucial-test">
<h2>Crucial test<a class="headerlink" href="#crucial-test" title="Link to this heading">#</a></h2>
<p>When you run the code cell below, a new window should open with the simulator. If this does not happen, with or without an error message, please let me know. If there is an error message, please send that to me.</p>
</section>
<section id="some-details">
<h2>Some details<a class="headerlink" href="#some-details" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>When Representational mode is on, ducks that currently prefer Source 1 are darkblue and those that prefer Source 2 are cyan. White indicates no preference (all ducks are white when Representational mode is off). There are conditions under which ducks may be white briefly when Representational mode is on.</p></li>
<li><p>Food is red. Ducks turn red when they first get food and then their color gradually goes from red to white as they consume the food. If ‘Food takes time’ is not on, food takes 10 timesteps to consume. Otherwise, the time it takes to consume is equal to the source size.</p></li>
<li><p>Restart button starts a new simulation with the current parameters. If you change pond height or width, you have to click Restart for those changes to apply. Note that <em>image size</em> can change the pond size while the simulation is running, but it will be cropped if you make it bigger. To make the bigger pond work, click Restart.</p></li>
<li><p>Continue does just that, from current conditions with current parameters.</p></li>
<li><p><strong>Quit button does not currently work.</strong> To quit the current simulation, close the simulator window.</p></li>
<li><p>To start a new simulation with default parameters, exit the current simulation (close simulator window) and re-run the code cell.</p></li>
<li><p>The Representational and Food takes time ‘sliders’ work like check boxes, just toggling between 0 (off/false) and 1 (on/true). They have immedate effect when you click them, so you can click back and forth between Representational and Nonrepresentational mode.</p></li>
<li><p>In addition to controlling pond height and width, you can control the dispersal area for each food source with ‘Food % Width’ and ‘Food % Height’. Making these 2 small may lead to a crash/stall, if there are no locations available for food to go. Food width can go from 10% to 90%, literally meaning that is the width of the area relative to pond width. Food height can only go from 10% to 50% because 50% takes you to the midline. You’ll see that making Food height bigger makes it more likely that ducks will have time to cross in Nonrepresentational mode (making pond height smaller has a similar effect).</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># enable animation in jupyter </span>
<span class="o">%</span><span class="k">matplotlib</span> widget 

<span class="kn">from</span> <span class="nn">mesa</span> <span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">Model</span>
<span class="kn">from</span> <span class="nn">mesa.time</span> <span class="kn">import</span> <span class="n">RandomActivation</span>
<span class="kn">from</span> <span class="nn">mesa.space</span> <span class="kn">import</span> <span class="n">MultiGrid</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">Checkbutton</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">started</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># else it will run immediately</span>
<span class="c1">#blocksize = 10 # multiplier determines how large the canvas will be</span>

<span class="c1"># Initialize counters for info reports</span>
<span class="n">ducks_above_midline</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ducks_below_midline</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ducks_crossed_midline</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">food_count</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># # Define global variables for representational and food_takes_time</span>
<span class="c1"># # could not get this working properly</span>
<span class="c1"># representational_var = True</span>
<span class="c1"># food_takes_time_var = False</span>

<span class="c1"># # Function to update representational and food_takes_time variables</span>
<span class="c1"># could not get this working properly</span>
<span class="c1"># def update_checkboxes():</span>
<span class="c1">#     global representational_var, food_takes_time_var</span>
<span class="c1">#     representational_var = representational_var.get()</span>
<span class="c1">#     food_takes_time_var = food_takes_time_var.get()</span>


<span class="c1"># Duck Agent</span>
<span class="k">class</span> <span class="nc">Duck</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unique_id</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">unique_id</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_stay_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switchiness</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">((</span><span class="n">sw_mean_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="n">sw_sd_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">/</span><span class="mi">100</span><span class="p">))))</span>  <span class="c1"># Clipped between 0 and 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;source1&#39;</span><span class="p">,</span> <span class="s1">&#39;source2&#39;</span><span class="p">])</span>  <span class="c1"># Initial random preference</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source1&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;dark blue&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source2&#39;</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;cyan&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>


    <span class="k">def</span> <span class="nf">update_midline_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">above_midline</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="p">):</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">pos1</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">pos2</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
    
    <span class="k">def</span> <span class="nf">get_interpolated_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_color</span><span class="p">,</span> <span class="n">end_color</span><span class="p">,</span> <span class="n">proportion</span><span class="p">):</span>
        <span class="c1"># Unpack RGB values</span>
        <span class="n">r1</span><span class="p">,</span> <span class="n">g1</span><span class="p">,</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">start_color</span>
        <span class="n">r2</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">end_color</span>

        <span class="c1"># Calculate interpolated RGB values (allows ducks to fade from red to pink to white while eating</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">r1</span> <span class="o">+</span> <span class="n">proportion</span> <span class="o">*</span> <span class="p">(</span><span class="n">r2</span> <span class="o">-</span> <span class="n">r1</span><span class="p">))</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">g1</span> <span class="o">+</span> <span class="n">proportion</span> <span class="o">*</span> <span class="p">(</span><span class="n">g2</span> <span class="o">-</span> <span class="n">g1</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b1</span> <span class="o">+</span> <span class="n">proportion</span> <span class="o">*</span> <span class="p">(</span><span class="n">b2</span> <span class="o">-</span> <span class="n">b1</span><span class="p">))</span>
    
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">r</span><span class="si">:</span><span class="s2">02x</span><span class="si">}{</span><span class="n">g</span><span class="si">:</span><span class="s2">02x</span><span class="si">}{</span><span class="n">b</span><span class="si">:</span><span class="s2">02x</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Calculate the proportion of stay_time remaining</span>
            <span class="n">proportion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_stay_time</span>

            <span class="c1"># Define the start and end colors in RGB</span>
            <span class="n">end_color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>  <span class="c1"># RGB for light red</span>
            <span class="n">start_color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>  <span class="c1"># RGB for white</span>

            <span class="c1"># Calculate the interpolated color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interpolated_color</span><span class="p">(</span><span class="n">start_color</span><span class="p">,</span> <span class="n">end_color</span><span class="p">,</span> <span class="n">proportion</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source1&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;dark blue&#39;</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source2&#39;</span><span class="p">:</span> 
                    <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;cyan&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
            <span class="k">return</span>       
        
            <span class="c1"># failed code for putting a circle on eating ducks</span>
            <span class="c1"># dx, dy = self.pos</span>
            <span class="c1"># ox1, oy1 = dx * blocksize, dy * blocksize</span>
            <span class="c1"># ox2, oy2 = ox1 + blocksize, oy1 + blocksize</span>
            <span class="c1"># canvas.create_oval(ox1, oy1, ox2, oy2, fill=&quot;&quot;, outline=&quot;black&quot;)</span>

        <span class="c1"># get position</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
        <span class="c1"># determine if you crossed the midline</span>
        <span class="n">new_above_midline</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span>
    
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">above_midline</span> <span class="o">!=</span> <span class="n">new_above_midline</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">midline_crossings</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Increment the counter in the model</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">above_midline</span> <span class="o">=</span> <span class="n">new_above_midline</span>
        
        <span class="n">food_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Initialize to empty list</span>
        <span class="n">relprev1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">relprev1</span>
        <span class="n">relprev2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">relprev2</span>

        <span class="k">if</span> <span class="n">representational_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># if this is 1 (True) then we are in representational mode</span>
        <span class="c1">#if representational_var == 1:</span>
            <span class="c1"># Decision-making based on relative prevalence</span>
            <span class="c1"># # only consider a switch if we &#39;get permission&#39; from random value</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">switchiness</span><span class="p">:</span> <span class="c1"># consider switching?</span>
                    <span class="c1"># choose more prevalent source</span>
                    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">max</span><span class="p">(</span><span class="n">relprev1</span><span class="p">,</span> <span class="n">relprev2</span><span class="p">):</span> 
                        <span class="k">if</span> <span class="n">relprev1</span> <span class="o">!=</span> <span class="n">relprev2</span><span class="p">:</span> <span class="c1"># otherwise retain previous preference because they are the same</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">=</span> <span class="s1">&#39;source1&#39;</span> <span class="k">if</span> <span class="n">relprev1</span> <span class="o">&gt;</span> <span class="n">relprev2</span> <span class="k">else</span> <span class="s1">&#39;source2&#39;</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;either&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;source1&#39;</span><span class="p">,</span> <span class="s1">&#39;source2&#39;</span><span class="p">])</span>  <span class="c1"># choose randomly</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># choose less prevalent source with low probability</span>
                        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">(</span><span class="n">relprev1</span><span class="p">,</span> <span class="n">relprev2</span><span class="p">):</span> <span class="c1"># consider switching?</span>
                            <span class="k">if</span> <span class="n">relprev1</span> <span class="o">!=</span> <span class="n">relprev2</span><span class="p">:</span> <span class="c1"># otherwise retain previous preference because they are the same</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">=</span> <span class="s1">&#39;source1&#39;</span> <span class="k">if</span> <span class="n">relprev1</span> <span class="o">&lt;</span> <span class="n">relprev2</span> <span class="k">else</span> <span class="s1">&#39;source2&#39;</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;either&#39;</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;source1&#39;</span><span class="p">,</span> <span class="s1">&#39;source2&#39;</span><span class="p">])</span>  <span class="c1"># choose randomly</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source1&#39;</span><span class="p">:</span>
                <span class="n">food_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">agent</span><span class="p">,</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source2&#39;</span><span class="p">:</span>
                <span class="n">food_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">agent</span><span class="p">,</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># not in representational mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preference</span><span class="o">=</span><span class="s1">&#39;either&#39;</span>
            <span class="c1"># Get all food locations on the grid</span>
            <span class="n">food_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">agent</span><span class="p">,</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>

        <span class="c1">#print(f&#39;duck {self.unique_id}: relprev1 {relprev1} relprev2 {relprev2}, pref {self.preference}, color {self.color}&#39;)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source1&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;dark blue&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source2&#39;</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;cyan&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
 

        <span class="c1"># If there is food, find the closest one</span>
        <span class="c1">#print(food_list)</span>
        <span class="k">if</span> <span class="n">food_list</span><span class="p">:</span>
            <span class="n">closest_food_pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">food_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))[</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># If the duck is right next to the closest food, move directly into that cell</span>
            <span class="n">neighbors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_neighborhood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">moore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">closest_food_pos</span> <span class="ow">in</span> <span class="n">neighbors</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">move_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">closest_food_pos</span><span class="p">)</span>
                <span class="n">agents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_cell_list_contents</span><span class="p">([</span><span class="n">closest_food_pos</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
                        <span class="k">if</span> <span class="n">food_takes_time_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="c1">#if food_takes_time_var == 1:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">initial_stay_time</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">size</span>  <span class="c1"># set initial stay_time which we will use to morph color</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">size</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">initial_stay_time</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># set initial stay_time which we will use to morph color</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">stay_time</span> <span class="o">=</span> <span class="mi">10</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">remove_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
                        <span class="k">return</span>

            <span class="c1"># Otherwise, find the empty neighbor closest to the food and move there</span>
            <span class="n">empty_neighbors</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">neighbors</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">is_cell_empty</span><span class="p">(</span><span class="n">pos</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">empty_neighbors</span><span class="p">:</span>
                <span class="n">move_towards_food</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">empty_neighbors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">closest_food_pos</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">move_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move_towards_food</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If there is no food, move randomly</span>
            <span class="n">neighbors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_neighborhood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">moore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">empty_neighbors</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">neighbors</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">is_cell_empty</span><span class="p">(</span><span class="n">pos</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">empty_neighbors</span><span class="p">:</span>
                <span class="n">new_position</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">empty_neighbors</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">move_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_position</span><span class="p">)</span>

<span class="c1"># Food Agent</span>
<span class="k">class</span> <span class="nc">Food</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unique_id</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">unique_id</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>  

<span class="k">class</span> <span class="nc">DuckPond</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">nducks</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>  <span class="c1"># Initialize the Model class</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">current_id</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Add this line to initialize the ID counter</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span> <span class="o">=</span> <span class="n">nducks</span>
        
        <span class="c1">#self.grid = MultiGrid(width, height, True)</span>
        <span class="c1"># Set torus to False so ducks can&#39;t &#39;wrap&#39; from edges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">MultiGrid</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  
        
        <span class="bp">self</span><span class="o">.</span><span class="n">midline_crossings</span> <span class="o">=</span> <span class="mi">0</span>
 
        <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relprev1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relprev2</span> <span class="o">=</span> <span class="mi">0</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span> <span class="o">=</span> <span class="n">RandomActivation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate1</span> <span class="o">=</span> <span class="n">rate1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate2</span> <span class="o">=</span> <span class="n">rate2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="c1"># Initialize ducks</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">is_cell_empty</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="n">duck</span> <span class="o">=</span> <span class="n">Duck</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">next_id</span><span class="p">(),</span> <span class="bp">self</span><span class="p">)</span>  <span class="c1"># Use next_id() function here</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">place_agent</span><span class="p">(</span><span class="n">duck</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">duck</span><span class="o">.</span><span class="n">update_midline_status</span><span class="p">()</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">duck</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate1</span> <span class="o">=</span> <span class="n">rate1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate2</span> <span class="o">=</span> <span class="n">rate2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>

        <span class="n">food_height</span> <span class="o">=</span> <span class="n">food_height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">use_food_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">food_height</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_food</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">use_food_height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source1</span> <span class="o">+=</span> <span class="n">size1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_food</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">use_food_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source2</span> <span class="o">+=</span> <span class="n">size2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            
        <span class="c1"># Update prevalence</span>
        <span class="n">prevalence1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source1</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">prevalence2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_food_source2</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">prevalence1</span> <span class="o">+</span> <span class="n">prevalence2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relprev1</span> <span class="o">=</span> <span class="n">prevalence1</span> <span class="o">/</span> <span class="p">(</span><span class="n">prevalence1</span> <span class="o">+</span> <span class="n">prevalence2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relprev2</span> <span class="o">=</span> <span class="n">prevalence2</span> <span class="o">/</span> <span class="p">(</span><span class="n">prevalence1</span> <span class="o">+</span> <span class="n">prevalence2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relprev1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relprev2</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">add_food</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">food_width</span> <span class="o">=</span> <span class="n">food_width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>        
        <span class="n">use_food_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">food_width</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">half_width</span> <span class="o">=</span> <span class="n">use_food_width</span> <span class="o">//</span> <span class="mi">2</span>  <span class="c1"># Calculate half of the food_width</span>
        <span class="n">start_col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">half_width</span><span class="p">)</span>  <span class="c1"># Calculate the starting column</span>
        <span class="n">end_col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">half_width</span><span class="p">)</span>  <span class="c1"># Calculate the ending column</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">start_col</span><span class="p">,</span> <span class="n">end_col</span><span class="p">)</span>  <span class="c1"># Randomly pick a column between start_col and end_col</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span><span class="p">)</span>  <span class="c1"># Randomly pick a row between row_start and row_end</span>

        <span class="n">tries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">maxtries</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">is_cell_empty</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">tries</span> <span class="o">&lt;</span> <span class="n">maxtries</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">start_col</span><span class="p">,</span> <span class="n">end_col</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">row_start</span><span class="p">,</span> <span class="n">row_end</span><span class="p">)</span>
            <span class="n">tries</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">food</span> <span class="o">=</span> <span class="n">Food</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">next_id</span><span class="p">(),</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="c1"># Create a new Food agent with the value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">place_agent</span><span class="p">(</span><span class="n">food</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>  <span class="c1"># Place the Food agent on the grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">food</span><span class="p">)</span>  <span class="c1"># Add the Food agent to the schedule</span>
        
    <span class="k">def</span> <span class="nf">next_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># Add this function to generate the next ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_id</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_id</span>

<span class="c1"># Continue the simulation</span>
<span class="k">def</span> <span class="nf">continue_simulation</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">max_timesteps</span>  <span class="c1"># Declare max_timesteps as global so that we can modify it</span>
    <span class="n">max_timesteps</span> <span class="o">+=</span> <span class="n">time_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="c1"># Increase the maximum allowed timesteps</span>
    <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">update</span><span class="p">)</span>  <span class="c1"># Continue the simulation</span>
    
<span class="k">def</span> <span class="nf">toggle_pause</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">paused</span>
    <span class="n">paused</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">paused</span>  <span class="c1"># Toggle between paused and unpaused</span>

    <span class="c1"># Update button text/icon</span>
    <span class="k">if</span> <span class="n">paused</span><span class="p">:</span>
        <span class="n">pause_button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;▶&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pause_button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;⏸&quot;</span><span class="p">)</span>

<span class="c1"># Update function that pauses if the flag is set</span>
<span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">paused</span><span class="p">:</span>  <span class="c1"># Only proceed if not paused</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">max_timesteps</span><span class="p">:</span>  <span class="c1"># Check if we&#39;ve reached the maximum timestep</span>
            <span class="n">model</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
            <span class="n">draw_pond</span><span class="p">()</span>
            <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">update</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Simulation finished.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">update</span><span class="p">)</span>  <span class="c1"># Check again after 100ms if still paused</span>

<span class="c1"># Add a Start process for Start button</span>
<span class="k">def</span> <span class="nf">start_simulation</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">started</span>
    <span class="n">started</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">update</span><span class="p">()</span>
    
<span class="c1"># If we do not quit, we have to restart terminal</span>
<span class="k">def</span> <span class="nf">quit_simulation</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">started</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">started</span><span class="p">:</span>
        <span class="c1"># if mainloop not running quit makes it hang</span>
        <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="c1"># root.quit()    </span>
    <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>  <span class="c1"># this will remove the root from the screen</span>


<span class="k">def</span> <span class="nf">draw_pond</span><span class="p">():</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
    
    <span class="c1"># Counters for ducks and other statistics</span>
    <span class="n">ducks_above_midline</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ducks_below_midline</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ducks_crossed_midline</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># You&#39;ll need to keep track of their previous positions to implement this</span>
    <span class="n">total_ducks</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">total_food</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">blocksize</span> <span class="o">=</span> <span class="n">blocksize_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">midline</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span>
    
    <span class="k">for</span> <span class="n">agents</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">coord_iter</span><span class="p">():</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;light blue&quot;</span>  <span class="c1"># default color</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Duck</span><span class="p">):</span>
                <span class="n">total_ducks</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">midline</span><span class="p">:</span>
                    <span class="n">ducks_above_midline</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ducks_below_midline</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">color</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">):</span>
                <span class="n">total_food</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">color</span>
                
        <span class="n">canvas</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">blocksize</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="n">blocksize</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">blocksize</span><span class="o">+</span><span class="n">blocksize</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="n">blocksize</span><span class="o">+</span><span class="n">blocksize</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
    
    <span class="c1"># Draw gridlines</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">,</span> <span class="n">blocksize</span><span class="p">):</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;light grey&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">,</span> <span class="n">blocksize</span><span class="p">):</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;light grey&quot;</span><span class="p">)</span>
                 
    <span class="c1"># Draw black line at the vertical midline</span>
        <span class="n">midline_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">midline_y</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">blocksize</span><span class="p">,</span> <span class="n">midline_y</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
    
    <span class="c1"># Calculate predictions</span>
    <span class="n">total_source1</span> <span class="o">=</span> <span class="n">rate1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span>  <span class="c1"># Assuming size1 is 5 rows</span>
    <span class="n">total_source2</span> <span class="o">=</span> <span class="n">rate2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span>  <span class="c1"># Assuming size2 is 5 rows</span>
    <span class="n">total_sources</span> <span class="o">=</span> <span class="n">total_source1</span> <span class="o">+</span> <span class="n">total_source2</span>
    
    <span class="n">predicted_ducks_source1</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_source1</span> <span class="o">/</span> <span class="n">total_sources</span><span class="p">)</span> <span class="o">*</span> <span class="n">total_ducks</span>
    <span class="n">predicted_ducks_source2</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_source2</span> <span class="o">/</span> <span class="n">total_sources</span><span class="p">)</span> <span class="o">*</span> <span class="n">total_ducks</span>
    
    <span class="c1"># Update statistics</span>
    <span class="n">ducks_above_midline</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Duck</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">ducks_below_midline</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Duck</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">proportion_above</span> <span class="o">=</span> <span class="n">ducks_above_midline</span> <span class="o">/</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">proportion_below</span> <span class="o">=</span> <span class="n">ducks_below_midline</span> <span class="o">/</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
    
    <span class="c1">#food_count = sum(1 for agent in model.schedule.agents if isinstance(agent, Food))</span>
    <span class="n">food_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">coord_iter</span><span class="p">()</span> <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Food</span><span class="p">)</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_cell_list_contents</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])))</span>


    <span class="c1"># Update Labels</span>
    <span class="n">label_ducks_nearer</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Ducks nearer: source 1 = </span><span class="si">{</span><span class="n">ducks_above_midline</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">proportion_above</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">), source 2 = </span><span class="si">{</span><span class="n">ducks_below_midline</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">proportion_below</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="c1">#label_ducks_crossed.config(text=f&quot;Ducks crossed midline: {ducks_crossed_midline}&quot;)</span>
    <span class="n">label_food_count</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Food count: </span><span class="si">{</span><span class="n">food_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">label_timestep</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Current Timestep: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">label_ducks_crossed</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Midline Crossings: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">midline_crossings</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="c1">#label_check_states.config(text=f&quot;Representational: {representational_var}   Food takes time: {food_takes_time_var}&quot;)</span>
    <span class="n">label_check_states</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Representational: </span><span class="si">{</span><span class="n">representational_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">   Food takes time: </span><span class="si">{</span><span class="n">food_takes_time_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="c1"># Calculate food prevalence</span>
    <span class="n">total_food_prevalence</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">total_food_source1</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="n">total_food_source2</span>
    <span class="n">prevalence1_ratio</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">total_food_source1</span> <span class="o">/</span> <span class="n">total_food_prevalence</span> <span class="k">if</span> <span class="n">total_food_prevalence</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">prevalence2_ratio</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">total_food_source2</span> <span class="o">/</span> <span class="n">total_food_prevalence</span> <span class="k">if</span> <span class="n">total_food_prevalence</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="n">label_food_prevalence</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Food Prevalence: Source 1 = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">prevalence1_ratio</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">, Source 2 = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">prevalence2_ratio</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Calculate duck preferences</span>
    <span class="n">ducks_prefer_source1</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Duck</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source1&#39;</span><span class="p">)</span>
    <span class="n">ducks_prefer_source2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">schedule</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">Duck</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agent</span><span class="o">.</span><span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;source2&#39;</span><span class="p">)</span>
    <span class="n">total_ducks</span> <span class="o">=</span> <span class="n">ducks_prefer_source1</span> <span class="o">+</span> <span class="n">ducks_prefer_source2</span>

    <span class="n">preference1_ratio</span> <span class="o">=</span> <span class="n">ducks_prefer_source1</span> <span class="o">/</span> <span class="n">total_ducks</span> <span class="k">if</span> <span class="n">total_ducks</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">preference2_ratio</span> <span class="o">=</span> <span class="n">ducks_prefer_source2</span> <span class="o">/</span> <span class="n">total_ducks</span> <span class="k">if</span> <span class="n">total_ducks</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="n">label_duck_preference</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Duck Preferences: Source 1 = </span><span class="si">{</span><span class="n">preference1_ratio</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, Source 2 = </span><span class="si">{</span><span class="n">preference2_ratio</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">disc1</span> <span class="o">=</span> <span class="n">prevalence1_ratio</span> <span class="o">-</span> <span class="n">proportion_above</span>
    <span class="n">disc2</span> <span class="o">=</span> <span class="n">prevalence2_ratio</span> <span class="o">-</span> <span class="n">proportion_below</span>
    
    <span class="n">disctotal</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">disc1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">disc2</span><span class="p">)</span>
    <span class="n">label_discrepancies</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Discrepancy: Total=</span><span class="si">{</span><span class="n">disctotal</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, Src1=</span><span class="si">{</span><span class="n">disc1</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, Src2 = </span><span class="si">{</span><span class="n">disc2</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">update_model_parameters</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">model</span>
    <span class="n">model</span><span class="o">.</span><span class="n">rate1</span> <span class="o">=</span> <span class="n">rate1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">rate2</span> <span class="o">=</span> <span class="n">rate2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">size1</span> <span class="o">=</span> <span class="n">size1_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">size2</span> <span class="o">=</span> <span class="n">size2_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">num_agents</span> <span class="o">=</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
<span class="k">def</span> <span class="nf">start_simulation</span><span class="p">():</span>
    
    <span class="c1"># Initialize Model</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">DuckPond</span><span class="p">(</span><span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="c1"># # Draw initial state</span>
    <span class="c1"># draw_pond()</span>

    <span class="c1"># Start the simulation</span>
    <span class="n">started</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">update</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">restart_simulation</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">model</span><span class="p">,</span> <span class="n">max_timesteps</span><span class="p">,</span> <span class="n">started</span>  <span class="c1"># Declare these as global variables so you can modify them</span>

    <span class="c1"># Stop the ongoing simulation</span>
    <span class="n">started</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">blocksize</span> <span class="o">=</span> <span class="n">blocksize_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">animation_speed</span> <span class="o">=</span> <span class="n">speed_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
    <span class="c1"># Re-initialize the model</span>
    <span class="n">max_timesteps</span> <span class="o">=</span> <span class="n">time_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">DuckPond</span><span class="p">(</span><span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="c1"># Redraw the pond</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">blocksize</span> <span class="o">*</span> <span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">height</span><span class="o">=</span><span class="n">blocksize</span> <span class="o">*</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
    <span class="n">draw_pond</span><span class="p">()</span>
    <span class="n">start_simulation</span><span class="p">()</span>

<span class="c1"># global paused var</span>
<span class="n">paused</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Frame for sliders and button</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Duck Pond Simulation&quot;</span><span class="p">)</span>

<span class="c1"># Frame for sliders</span>
<span class="n">frame_sliders</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">frame_sliders</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">)</span>
<span class="c1">#frame_sliders.grid_columnconfigure(1, weight=4)  # Make column 1 (sliders) wider -- does not work</span>


<span class="c1"># Frame for buttons</span>
<span class="n">frame_buttons</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">frame_buttons</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="c1"># Frame for labels</span>
<span class="n">frame_labels</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">frame_labels</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">sliderlength</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c1"># Use the columnconfigure method to make specific columns wider</span>
<span class="n">frame_sliders</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Make column 0 (empty space) wider</span>
<span class="n">frame_sliders</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Make column 1 (sliders) wider, adjust the weight as needed</span>
<span class="n">frame_sliders</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Make column 2 (empty space) wider</span>
<span class="n">frame_sliders</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Make column 2 (empty space) wider</span>

<span class="c1"># Timesteps and Number of Ducks</span>
<span class="n">time_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Max Timesteps&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">time_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span> <span class="p">)</span>
<span class="n">time_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>

<span class="n">duck_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Number of Ducks&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">duck_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">duck_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># Pond Height and Pond Width</span>
<span class="n">height_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pond Height&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">height_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">height_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

<span class="n">width_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pond Width&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">width_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">width_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># food height and width</span>
<span class="n">food_width_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Food % Width&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">food_width_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">food_width_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

<span class="n">food_height_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Food % Height&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">food_height_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">food_height_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>


<span class="c1"># Rate 1 and Size 1</span>
<span class="n">rate1_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Rate 1&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">rate1_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">rate1_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">size1_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Size 1&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">size1_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">size1_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Rate 2 and Size 2</span>
<span class="n">rate2_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Rate 2&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">rate2_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">rate2_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="n">size2_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Size 2&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">size2_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">size2_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># switchiness mean and sd sliders</span>
<span class="n">sw_mean_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Switchiness mean&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">sw_mean_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sw_mean_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

<span class="n">sw_sd_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Switchiness standard deviation&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">sw_sd_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sw_sd_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># representation and food_takes_time sliders</span>
<span class="n">representational_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Representational&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span> <span class="n">sliderlength</span> <span class="o">*</span> <span class="mf">.6</span><span class="p">)</span>
<span class="n">representational_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">representational_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">food_takes_time_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Food takes time&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span> <span class="o">*</span> <span class="mf">.6</span><span class="p">)</span>
<span class="n">food_takes_time_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">food_takes_time_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># # Add checkboxes for representational_slider and food_takes_time_slider</span>
<span class="c1"># could not get this working properly</span>
<span class="c1"># representational_var = tk.IntVar()</span>
<span class="c1"># representational_checkbox = Checkbutton(frame_sliders, text=&quot;Representational&quot;, variable=representational_var)</span>
<span class="c1"># representational_checkbox.grid(row=7, column=0)</span>
<span class="c1"># representational_var.set(1)  # Set the initial state to checked (1)</span>

<span class="c1"># food_takes_time_var = tk.IntVar()</span>
<span class="c1"># food_takes_time_checkbox = Checkbutton(frame_sliders, text=&quot;Food takes time&quot;, variable=food_takes_time_var)</span>
<span class="c1"># food_takes_time_checkbox.grid(row=7, column=1)</span>
<span class="c1"># food_takes_time_var.set(0)  # Set the initial state to unchecked (0)</span>

<span class="c1"># # Bind the update_checkboxes function to the checkboxes</span>
<span class="c1"># representational_checkbox.config(command=update_checkboxes)</span>
<span class="c1"># food_takes_time_checkbox.config(command=update_checkboxes)</span>


<span class="c1"># blocksize multiplier</span>
<span class="n">blocksize_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Image size&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">blocksize_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">blocksize_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="c1"># animation speed slider</span>
<span class="n">speed_slider</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">frame_sliders</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Speed (bigger=slower)&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">sliderlength</span><span class="p">)</span>
<span class="n">speed_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">speed_slider</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>


<span class="c1"># quit button </span>
<span class="n">quit_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame_buttons</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">quit_simulation</span><span class="p">)</span>
<span class="n">quit_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>


<span class="c1"># # start button</span>
<span class="c1"># start_button = tk.Button(frame_buttons, text=&quot;Start&quot;, command=start_simulation)</span>
<span class="c1"># start_button.grid(row=1, columnspan=2)</span>

<span class="c1"># Continue Button</span>
<span class="n">continue_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame_buttons</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Continue&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">continue_simulation</span><span class="p">)</span>
<span class="n">continue_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Restart button</span>
<span class="n">restart_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame_buttons</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Restart&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">restart_simulation</span><span class="p">)</span>
<span class="n">restart_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Add a Pause/Play button to the GUI</span>
<span class="n">pause_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame_buttons</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;⏸&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">toggle_pause</span><span class="p">)</span>
<span class="n">pause_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Establish the labels that we use to print messages</span>
<span class="n">label_ducks_nearer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_ducks_nearer</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">label_ducks_crossed</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_ducks_crossed</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">label_food_count</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_food_count</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># Add a label for displaying the current timestep</span>
<span class="n">label_timestep</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_timestep</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">label_food_prevalence</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_food_prevalence</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">label_duck_preference</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_duck_preference</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">label_discrepancies</span><span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_discrepancies</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">label_check_states</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame_labels</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">label_check_states</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>


<span class="c1"># Canvas</span>
<span class="n">blocksize</span> <span class="o">=</span> <span class="n">blocksize_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">blocksize</span><span class="o">*</span><span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">width</span><span class="o">=</span><span class="n">blocksize</span><span class="o">*</span><span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="n">canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="c1"># Initialize max_timesteps here</span>
<span class="n">max_timesteps</span> <span class="o">=</span> <span class="n">time_slider</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="c1"># # Initialize Model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">DuckPond</span><span class="p">(</span><span class="n">width_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">height_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">duck_slider</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>


<span class="c1"># Draw initial state</span>
<span class="n">draw_pond</span><span class="p">()</span>

<span class="c1"># call pdate function</span>
<span class="k">if</span> <span class="n">started</span><span class="p">:</span>
    <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">update</span><span class="p">)</span>

<span class="c1"># Start the Tkinter main loop</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lab-report-part-1">
<h1>Lab report, part 1<a class="headerlink" href="#lab-report-part-1" title="Link to this heading">#</a></h1>
<p>First, just explore the simulator. You can control various parameters with the sliders. You may find it helpful to set <code class="docutils literal notranslate"><span class="pre">Timesteps</span></code> to a lower value as you explore parameters. Currently, none of the sliders take effect <em>during</em> a simulation: they take effect when you start the next simulation. <em>For now, don’t use the <code class="docutils literal notranslate"><span class="pre">Representational</span></code> slider or the <code class="docutils literal notranslate"><span class="pre">Food</span> <span class="pre">takes</span> <span class="pre">time</span></code> slider.</em></p>
<ol class="arabic simple">
<li><p>Try a few different rate combinations, keeping both sizes 8. What happens if you set both rates to the same small value, medium value, or large value? What happens if you make the ratio 2:1 (rate1 twice as large as rate2)?</p></li>
<li><p>Try a few different size combinations, initially setting both rates to 4. Explore and report a few observations.</p></li>
<li><p>With one interesting combination you found for #1 or #2 (or one or a few from each), see what happens as you make the pond taller. You may find the <code class="docutils literal notranslate"><span class="pre">Plot</span> <span class="pre">size</span></code> slider helpful to make the grid fit nicely in your browser window.</p></li>
<li><p>Draw some general conclusions. This simulation is using the ‘representational’ approach, where each duck tracks food density over time (size units per time units). Is it able to simulate probability matching due to differences in rate? Is it able to simulate probability matching due to differences in size?</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lab-report-part-2">
<h1>Lab report, part 2<a class="headerlink" href="#lab-report-part-2" title="Link to this heading">#</a></h1>
<p>We saw that with the ‘representational’ approach, we seem to be able to do a fine job of simulating probability matching to prevalence differences due to rate or magnitude. Gallistel makes a very strong claim about this approach:</p>
<blockquote>
<div><p>[Results suggest] that birds accurately represent rates, that they accurately represent morsel magnitudes, and that they can multiply the representation of morsels per unit time by the representation of morsel magnitude to compute the internal variables that determine the relative likelihood of their choosing one foraging patch over the other. (p. 358)</p>
</div></blockquote>
<p>He makes an even bolder claim for alternative theories:</p>
<blockquote>
<div><p>The challenge for nonrepresentational theories … Is to propound a nonrepresentational model of … a system that is altered by its past experiences in such a way that it chooses patches in proportion to their relative [densities] … from … observations alone … without the system’s having any internal variable[s] … or a fortiori any operations that appropriately combine these nonexistent representatives of number, time, and magnitude. Is it possible to propound a model of the internal causation of the duck’s behavior that avoids postulating an isomorphism between a system of variables and operations inside the duck and the corresponding system of number, time and magnitude external to the duck? (p. 359)</p>
</div></blockquote>
<p>As some of you have noted, his idea of a ‘nonrepresentational’ account still seems to require a fair amount of representation – some way of learning which source is ‘better’ without explicitly tracking rate and size. However, can we make a more radically nonrepresentational version of our model? The way the code works is that when <code class="docutils literal notranslate"><span class="pre">Representational</span></code> is set to 1 (that is, when the simulator is in Representational mode), there is a procedure where each duck chooses its preferred source based on food prevalence. Then, it ‘aims’ for the closest morsel of uneaten food at its preferred source.</p>
<p>Well, what would happen if we just skipped the ‘choose preferred source’ step, and each duck just aimed for the closest morsel of food, no matter which source it is near? Would we still be able to observe probability matching?</p>
<ol class="arabic simple" start="5">
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Representational</span></code> button to set representational mode to 0. This will skip the ‘choose the preferred source’ step. Confirm that you see ‘Representational: 0’ above the plot. No need to answer this question.</p></li>
<li><p>Try a few different rate combinations, keeping both sizes 8. What happens if you set both rates to the same small value, medium value, or large value? What happens if you make the ratio 2:1 (rate1 twice as large as rate2)?</p></li>
<li><p>Try a few different size combinations, initially setting both rates to 4. Explore and report a few observations.</p></li>
<li><p>With one interesting combination you found for #1 or #2 (or one or a few from each), see what happens as you make the pond taller. You may find the <code class="docutils literal notranslate"><span class="pre">Plot</span> <span class="pre">size</span></code> slider helpful to make the grid fit nicely in your browser window.</p></li>
<li><p>Draw some general conclusions. This simulation is using the ‘<strong>non</strong>representational’ approach, where ducks do <strong>not</strong> track food density over time (size units per time units). Is it able to simulate probability matching due to differences in rate? Is it able to simulate probability matching due to differences in size?</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lab-report-part-3">
<h1>Lab report, part 3<a class="headerlink" href="#lab-report-part-3" title="Link to this heading">#</a></h1>
<p>Your answers for #2 and #7 should be different. Hint: you should have trouble seeing probability matching based on size when Representational is set to 0.</p>
<ol class="arabic simple" start="10">
<li><p>Why do the Representational and Nonrepresentational modes differ for size?</p></li>
<li><p>Before looking ahead, can you think of any way you could make both modes capable of simulating probability matching based on size differences?</p></li>
</ol>
<p>Now keep Representational = 0 and set “Food takes time” to 1. When ‘Food takes time’ is set to 0, food takes 1 time step for ducks to consume, no matter what the magnitude (size) value is. (You could change this to a different fixed value by searching for <code class="docutils literal notranslate"><span class="pre">time_to_consume</span> <span class="pre">=</span> <span class="pre">1</span></code> and set it to a different value.) When ‘Food takes time’ is set to 1, it takes a duck <code class="docutils literal notranslate"><span class="pre">size</span></code> timesteps to eat a morsel of food (e.g., if <code class="docutils literal notranslate"><span class="pre">size1</span></code> is set to 8, when a duck reaches that morsel, it will stay stationary for 8 time steps and then it will be free to seek more food).</p>
<ol class="arabic simple" start="12">
<li><p>How might setting ‘Food takes time’ to 1 change aspects of the simulation?</p></li>
<li><p>With ‘Representational’ set to 0 and ‘Food takes time’ set to 1, repeat your simulations with rate differences and size differences. What changes do you observe for size differences? Is it more like what you observed for #2 or for #7? Can you explain why?</p></li>
<li><p>Now set ‘Representational’ to 1 (and ‘Food takes time’ to 1), and repeat your simulations with size differences. What changes do you observe for size differences compared to #2? Is it better, worse, or just the same? Can you explain why?</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lab-report-part-4-challenge-questions">
<h1>Lab report, part 4 – challenge questions<a class="headerlink" href="#lab-report-part-4-challenge-questions" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Undergrads</span> <span class="pre">not</span> <span class="pre">registered</span> <span class="pre">for</span> <span class="pre">honors</span> <span class="pre">credit</span> <span class="pre">can</span> <span class="pre">skip</span> <span class="pre">this</span> <span class="pre">part</span> <span class="pre">if</span> <span class="pre">they</span> <span class="pre">want,</span> <span class="pre">or</span> <span class="pre">complete</span> <span class="pre">for</span> <span class="pre">about</span> <span class="pre">2%</span> <span class="pre">extra</span> <span class="pre">credit</span></code></p>
<p><strong>Choose at least one but do as many as you like!</strong></p>
<ol class="arabic simple" start="15">
<li><p><em>Simulation challenge.</em> Examine how number of ducks relates to rate and magnitude. With the default parameters, what happens if you have only very few ducks or many more than the default? Can you describe ‘boundary conditions’ on the simuation – that is, are there particular (approximate) ratios of number ducks and food prevalence that could help you estimate how many ducks you need at minimum to observe probability matching (for representational and/or nonrepresentational mode)?</p></li>
<li><p><em>Simulation challenge.</em> Another possibility might be that you would find that ducks probability match in the  representational mode even when there is ‘too much’ or ‘too little’ food for probability matching to emerge with the nonrepresentational mode. What kinds of testable predictions (i.e., predictions you could test with real ducks) might that suggest?</p></li>
<li><p><em>Programming / theoretical challenge.</em> Examine the code where switchiness comes into play. Does this seem like an adequate analog to what Gallistel describes? (If your answer is simply ‘yes’, that’s fine, but then don’t bother with this question!) If not, can you propose an alternative way to implement switchiness? Double bonus: modify the code to implement your proposal and compare it to the original code (to do this, save a copy of the notebook with a new name where you can introduce your modifications).</p></li>
<li><p><em>Pure programming challenge.</em> Can you fix the bug where many/all ducks suddenly change to red or violet and the change back? <em>Warning</em>: I have actually looked into this extensively and posted about it on matplotlib and python message boards and have had no success – so this may not be solvable (e.g., if it is due to a bug in matplotlib).</p></li>
<li><p><em>Pure programming challenge.</em> This simulator would be much more useful if it saved outputs that could be analyzed later. Can you come up with a way to create data files when you run simulations? Note that you will likely want to write the parameter settings to the file <em>or</em> make them part of the filename – but you need some way to link the data file to the parameters.</p></li>
</ol>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="02b_math-probability-matching.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">PROBABILITY MATCHING, PART 2</p>
      </div>
    </a>
    <a class="right-next"
       href="04_probability-review.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Preliminaries: Understanding Logical Symbols in Probability</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">PROBABILITY MATCHING, PART 3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recapping-the-mathematical-model-approach">Recapping the mathematical model approach</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#towards-an-agent-based-approach">Towards an Agent-Based approach</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crucial-test">Crucial test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-details">Some details</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-1">Lab report, part 1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-2">Lab report, part 2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-3">Lab report, part 3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lab-report-part-4-challenge-questions">Lab report, part 4 – challenge questions</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By James Magnuson
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>